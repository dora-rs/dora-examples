nodes:
  - id: rust-node
    build: bash -c "cd node && cargo build --release"
    path: node/target/release/rust-dataflow-example-node
    inputs:
      tick: dora/timer/millis/10
    outputs:
      - random

  - id: rust-status-node
    build: bash -c "cd status-node && cargo build --release"
    path: status-node/target/release/rust-dataflow-example-status-node
    inputs:
      tick: dora/timer/millis/100
      random: rust-node/random
    outputs:
      - status

  - id: rust-sink
    build: bash -c "cd sink && cargo build --release"
    path: sink/target/release/rust-dataflow-example-sink
    inputs:
      message: rust-status-node/status

  - id: dora-record
    build: bash -c "echo $DORA; cd $DORA && cargo build -p dora-record --release"
    path: $DORA/target/release/dora-record
    inputs:
      message: rust-status-node/status
      random: rust-node/random
    env:
      DORA: $DORA
